<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Marshalling prep</title>
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Librairie A-frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- Librairie A-frame Extras -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <div id="fullscreen-rect">
        <p>Récupérez vos affaires avant de sortir sur le tarmac</p>
        <br>      
    </div>
    <a-scene>
    <!-- <a-scene fog="type: linear; color: #AAA; far: 35; near: 10"> -->
        <!-- Chargement des assets -->
        <a-assets>
            <audio id="alarm-clock" src="assets/alarm-clock-short.mp3" preload="auto"></audio>
            <audio id="neon-sound" src="assets/electric-hum-short.mp3" preload="auto"></audio>
            <a-asset-item id="piper-plane" src="assets/piper_pa18.obj"></a-asset-item>
            <a-asset-item id="piper-plane-material" src="assets/piper_pa18.mtl"></a-asset-item>
            <a-asset-item id="table" src="assets/table.gltf"></a-asset-item>
            <a-asset-item id="bureau" src="assets/bureau.gltf"></a-asset-item>
            <a-asset-item id="reveil" src="assets/reveil.gltf"></a-asset-item>
            <a-asset-item id="casier" src="assets/casier.gltf"></a-asset-item>
            <a-asset-item id="wand" src="assets/wand.gltf"></a-asset-item>
            <img id="sol-text" src="assets/rubber_tiles_diff_2k.jpg">
            <img id="mur-text" src="assets/concrete_wall_004_diff_2k.jpg">
            <img id="plafond-text" src="assets/concrete_wall_008_diff_2k.jpg">
            <img id="porte-text" src="assets/plywood_diff_2k.jpg">
            <!-- <audio id="prop-sound" src="assets/propeller.mp3" preload="auto"></audio> -->
        </a-assets>
        <a-sound id="alarm-clock-ent" src="#alarm-clock" autoplay="false" position="0 2 5"></a-sound>
        <a-sound id="neon-sound-ent" src="#neon-sound" autoplay="false" position="0 2 0"></a-sound>
        <!-- <a-entity id="prop-sound-ent" sound="src: assets/propeller.mp3; autoplay: false"></a-entity>
        <a-entity id="alarm-clock-ent" sound="src: assets/alarm-clock.mp3; autoplay: false"></a-entity> -->
        <!-- <a-obj-model src="#piper-plane" mtl="#piper-plane-material" position="10 -0.3 -15" scale="1 1 1" rotation="-12 -90 0"></a-obj-model> -->
        <!-- Pièce 7x7x3 -->
            <!-- Sol -->
            <a-box position="0 0 0" width="7" height="0.1" depth="7" material="src:#sol-text"></a-box>
            
            <!-- Plafond -->
            <a-box position="0 3 0" width="7" height="0.1" depth="7.2" material="src:#plafond-text"></a-box>
            <!-- Neon -->
            <!-- Base -->
            <a-box position="0 2.9 0" width="0.1" height="0.02" depth="1.5" material="color: black"></a-box>
            <!-- Tube -->
            <a-cylinder position="0 2.86 0" radius="0.03" height="1.32" rotation="90 0 0" material="color: white"></a-cylinder>
            <a-entity id="neon-light" light="type: point; intensity: 3; distance: 6; decay: 1; castShadow:true;" position="0 2.5 0"></a-entity>
            
            <!-- Murs -->
            <a-box position="0 0.5 -3.45" width="7" height="1" depth="0.1" material="src:#mur-text"></a-box>
            <a-plane position="0 2 -3.5" width="7" height="2" depth="0.1" material="color: white; opacity: 0.1"></a-plane>

            <a-box position="0 1.5 3.5" width="7" height="3" depth="0.1" material="src:#mur-text"></a-box>
            <!-- Mur gauche -->
            <!-- Sommet mur gauche -->
            <a-box position="-3.5 2.85 -0.75" width="0.1" height="0.3" depth="1.5" material="src:#mur-text"></a-box>

            <!-- Porte -->
            <a-box position="-3.5 1.35 -0.75" width="0.1" height="2.7" depth="1.5" material="src:#porte-text"></a-box>
                <!-- Cadre gauche -->
                <a-box position="-3.5 1.4 0" width="0.2" height="2.8" depth="0.1" material="color: black"></a-box>
                <!-- Cadre droite -->
                <a-box position="-3.5 1.4 -1.5" width="0.2" height="2.8" depth="0.1" material="color: black"></a-box>
                <!-- Cadre sommet -->
                <a-box position="-3.5 2.75 -0.75" width="0.2" height="0.1" depth="1.4" material="color: black"></a-box>
                <!-- Poignée -->
                <a-cylinder position="-3.5 1.35 -1.2" radius="0.025" height="0.3" rotation="90 90 0" material="color: #848484"></a-cylinder>
                <a-cylinder position="-3.35 1.35 -1.08" radius="0.025" height="0.27" rotation="90 0 0" material="color: #848484"></a-cylinder>
                <!-- "Tour" de poignée -->
                <a-box position="-3.5 1.25 -1.2" width="0.15" height="0.4" depth="0.1" material="color: #afafaf"></a-box>
                
            <!-- Gauche du mur gauche (direction mur arrière) -->
            <a-box position="-3.5 1.5 1.75" width="0.1" height="3" depth="3.5" material="src:#mur-text"></a-box>
            <!-- Droite du mur gauche (direction mur frontal/fenêtre) -->
            <a-box position="-3.5 1.5 -2.5" width="0.1" height="3" depth="2" material="src:#mur-text"></a-box>

            <a-box position="3.5 1.5 0" width="0.1" height="3" depth="7" material="src:#mur-text"></a-box>

            <!-- Mobilier -->
            <a-entity gltf-model="#bureau" position="1.63 0.03 2.191" rotation="0 180 0" scale="0.04 0.04 0.04"></a-entity>
            <a-entity gltf-model="#table" position="2.83 0 -0.971" rotation="0 0 0" scale="1.25 1.51 1.4"></a-entity>
            <a-entity gltf-model="#reveil" position="-0.002 1.240 1.251" rotation="0 30 0" scale="1.03 1.03 1.03"></a-entity>
            <a-entity gltf-model="#casier" position="-3.2 0 2.45" rotation="0 90 0" scale="1 1 1"></a-entity>
            <a-entity id="wand2" gltf-model="#wand" position="0.1 0.5 0.5" rotation="0 0 0" scale="1 1 1"></a-entity>
            
            <!-- Stores -->
            <a-entity position="0 2 -3.55">
                <!-- Lamelles -->
                <a-box position="0 0.95 0" rotation="0 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <a-box position="0 0.8 0" rotation="-30 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <a-box position="0 0.6 0" rotation="-30 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <a-box position="0 0.4 0" rotation="-30 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <a-box position="0 0.2 0" rotation="-30 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <a-box position="0 0.0 0" rotation="-30 0 0" width="7" height="0.02" depth="0.1" material="color: #848484"></a-box>
                <!-- Fils -->
                <a-cylinder position="-3.15 0.5 0" radius="0.005" height="1" color="#595959"></a-cylinder> 
                <a-cylinder position="0 0.5 0" radius="0.005" height="1" color="#595959"></a-cylinder>
                <a-cylinder position="3.15 0.5 0" radius="0.005" height="1" color="#595959"></a-cylinder>
                <!-- Noeuds/arrêtoirs -->
                <a-cylinder position="-3.15 -0.025 0" rotation="-30 0 0" radius="0.01" height="0.02" color="#595959"></a-cylinder> 
                <a-cylinder position="0 -0.025 0" rotation="-30 0 0" radius="0.01" height="0.02" color="#595959"></a-cylinder>
                <a-cylinder position="3.15 -0.025 0" rotation="-30 0 0" radius="0.01" height="0.02" color="#595959"></a-cylinder>
            </a-entity>

        <!-- Extérieur -->
        <!-- Sol -->
            <a-plane position="0 0 -43" rotation="-90 0 0" width="100" height="80" color="#7c7c7c"></a-plane>
            <!-- Lignes droites perpendiculaires fenêtre -->
            <a-plane position="0 0.01 -15" rotation="-90 -90 0" width="0.5" height="300" color="yellow"></a-plane>
            <a-plane position="0 0.002 -14.7" rotation="-90 -90 0" width="0.1" height="300" color="black"></a-plane>
            <a-plane position="0 0.002 -15.3" rotation="-90 -90 0" width="0.1" height="300" color="black"></a-plane>
            <!-- Virage -->
            <!-- Cercle extérieur noir pour virage -->
            <a-circle position="-7 0.002 -10" rotation="-90 0 0" radius="5.4" color="black" segment ="64"></a-circle>
            <!-- Cercle médian jaune pour virage -->
            <a-circle position="-7 0.003 -10" rotation="-90 0 0" radius="5.3" color="yellow" segment ="64"></a-circle>
            <!-- Cercle intérieur noir pour virage -->
            <a-circle position="-7 0.004 -10" rotation="-90 0 0" radius="4.7" color="black" segment ="64"></a-circle>
            <!-- Cercle gris intérieur pour masquage -->
            <a-circle position="-7 0.005 -10" rotation="-90 0 0" radius="4.62" color="#7c7c7c"></a-circle>
            <!-- Plans gris pour masquage -->
            <a-plane position="-7 0.006 -6.99" rotation="-90 0 0" width="12" height="6" color="#7c7c7c"></a-plane>
            <a-plane position="-3.5 0.007 -11.9" rotation="-90 0 0" width="7" height="5.5" color="#7c7c7c"></a-plane>
            <!-- Lignes noire pour masque reste virage -->
            <a-plane position="-3.5 0.01 -14.7" rotation="-90 -90 0" width="0.1" height="7" color="black"></a-plane>
            <a-plane position="-7 0.01 -15.3" rotation="-90 -90 0" width="0.1" height="300" color="black"></a-plane>
            <!-- Lignes n/j pour reprise du cercle -->
            <a-plane position="-12 0.01 -5.77" rotation="-90 0 0" width="0.6" height="8.45" color="yellow"></a-plane>
            <a-plane position="-12.34 0.02 -5.69" rotation="-90 0 0" width="0.085" height="8.6" color="black"></a-plane>
            <a-plane position="-11.67 0.02 -5.69" rotation="-90 0 0" width="0.085" height="8.6" color="black"></a-plane>

            <!-- Lumières du virage -->
            <a-cylinder position="-8.5 0.01 -13.9" radius="0.08" height="0.15" rotation="90 20 0" material="color: green"></a-cylinder>
            <a-light type="point" angle="0" position="-8.5 0.2 -13.9" color="green" intensity="1" distance="1" decay="0.1"></a-light>
            <a-cylinder position="-10.5 0.01 -12.3" radius="0.08" height="0.15" rotation="90 50 0" material="color: green"></a-cylinder>
            <a-light type="point" angle="20" position="-10.5 0.2 -12.3" color="green" intensity="1" distance="1" decay="0.1"></a-light>
            <a-cylinder  position="-11.15 0.01 -10.2" radius="0.08" height="0.15" rotation="90 70 0" material="color: green"></a-cylinder>
            <a-light type="point" angle="45" position="-11.15 0.2 -10.2" color="green" intensity="1" distance="1" decay="0.1"></a-light>
            <a-cylinder position="-11.2 0.01 -7.5" radius="0.08" height="0.15" rotation="90 90 0" material="color: green"></a-cylinder>
            <a-light type="point" angle="90" position="-11.2 0.2 -7.5" color="green" intensity="1" distance="1" decay="0.1"></a-light>
            <a-cylinder position="-11.2 0.01 -5" radius="0.08" height="0.15" rotation="90 90 0" material="color: green"></a-cylinder>
            <a-light type="point" angle="120" position="-11.2 0.2 -5" color="green" intensity="1" distance="1" decay="0.1"></a-light>

        <!-- Définit la caméra dans un rig auquel on peut donner les attributs
        nécessaires au déplacement par gamepad, la vitesse, et contraindre selon une navMesh (
        à voir si le temps sera suffisant pour la définir) -->
        <a-entity
            id="rig"
            position="0.5 1.25 2.3"
            movement-controls="controls: gamepad,keyboard; speed: 0.15; constrainToNavMesh: true">
            <a-camera position="0 0 0"></a-camera>
        </a-entity>
      
        <!-- Lumière ambiante simple -->
        <a-light type="ambient" color="#AAA" intensity="1"></a-light>

        <!-- <a-sky src="#sky"></a-sky> -->
        <a-sky color="#AAA"></a-sky>
        
    </a-scene>
      
    <!-- Script perso -->
    <script src="script.js"></script>
</body>
</html>